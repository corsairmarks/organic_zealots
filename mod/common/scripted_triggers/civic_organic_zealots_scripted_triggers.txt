# this = country
is_valid_target_to_outlaw_cybernetics_or_robot_pops_or_ai = {
	optimize_memory
	is_country_type = default
	is_robot_empire = no
	OR = {
		has_ascension_perk = ap_the_flesh_is_weak
		has_ascension_perk = ap_organo_machine_interfacing
		has_ascension_perk = ap_synthetic_evolution
		has_policy_flag = robots_allowed
		AND = {
			can_set_ai_policy = yes
			OR = {
				has_policy_flag = ai_servitude
				has_policy_flag = ai_full_rights
			}
		}
	}
}

# this = leader
has_mentat_trait = {
	OR = {
		has_trait = leader_trait_governor_mentat
		has_trait = leader_trait_scientist_mentat
		has_trait = leader_trait_ruler_mentat
		has_ruler_trait = leader_trait_ruler_mentat
	}
}

# this = country, actor
# from = country, recipient
diplomacy_is_not_homicidal = {
	optimize_memory
	diplomacy_actor_is_not_homicidal = yes
	diplomacy_recipient_is_not_homicidal = yes
}

# this = country, actor
# from = country, recipient
diplomacy_is_not_homicidal_non_gestalt = {
	optimize_memory
	diplomacy_actor_is_not_homicidal_non_gestalt = yes
	diplomacy_recipient_is_not_homicidal_non_gestalt = yes
}

# this = country, actor
# from = country, recipient
diplomacy_is_not_homicidal_gestalt = {
	optimize_memory
	diplomacy_actor_is_not_homicidal_gestalt = yes
	diplomacy_recipient_is_not_homicidal_gestalt = yes
}

# this = country, actor
# from = country, recipient
diplomacy_actor_is_not_homicidal = {
	optimize_memory
	diplomacy_actor_is_not_homicidal_non_gestalt = yes
	diplomacy_actor_is_not_homicidal_gestalt = yes
}

# this = country, actor
# from = country, recipient
diplomacy_recipient_is_not_homicidal = {
	optimize_memory
	diplomacy_recipient_is_not_homicidal_non_gestalt = yes
	diplomacy_recipient_is_not_homicidal_gestalt = yes
}

# this = country, actor
# from = country, recipient
diplomacy_actor_is_not_homicidal_non_gestalt = {
	optimize_memory
	custom_tooltip = {
		fail_text = "requires_actor_not_fanatic_purifiers"
		OR = {
			is_same_species = from
			NOT = { has_valid_civic = civic_fanatic_purifiers	}
		}
	}
	custom_tooltip = {
		fail_text = "requires_actor_not_organic_zealots"
		OR = {
			is_same_species = from
			is_valid_organic_zealots = no
			AND = {
				is_valid_organic_zealots = yes
				from = { is_robot_empire = no }
			}
		}
	}
}

# this = country, actor
# from = country, recipient
diplomacy_actor_is_not_homicidal_gestalt = {
	optimize_memory
	custom_tooltip = {
		fail_text = "requires_actor_not_devouring_swarm"
		NOT = { has_valid_civic = civic_hive_devouring_swarm	}
	}
	custom_tooltip = {
		fail_text = "requires_actor_not_machine_terminator"
		OR = {
			is_same_species = from
			NOT = { has_valid_civic = civic_machine_terminator }
			AND = {
				has_valid_civic = civic_machine_terminator
				from = { is_robot_empire = yes }
			}
		}
	}
}

# this = country, actor
# from = country, recipient
diplomacy_recipient_is_not_homicidal_non_gestalt = {
	optimize_memory
	custom_tooltip = {
		fail_text = "requires_recipient_not_fanatic_purifiers"
		OR = {
			is_same_species = from
			from = { NOT = { has_valid_civic = civic_fanatic_purifiers } }
		}
	}
	custom_tooltip = {
		fail_text = "requires_recipient_not_organic_zealots"
		OR = {
			is_same_species = from
			from = { is_valid_organic_zealots = no }
			AND = {
				from = { is_valid_organic_zealots = yes }
				is_robot_empire = no
			}
		}
	}
}

# this = country, actor
# from = country, recipient
diplomacy_recipient_is_not_homicidal_gestalt = {
	optimize_memory
	custom_tooltip = {
		fail_text = "requires_recipient_not_devouring_swarm"
		from = { NOT = { has_valid_civic = civic_hive_devouring_swarm } }
	}
	custom_tooltip = {
		fail_text = "requires_recipient_not_machine_terminator"
		OR = {
			is_same_species = from
			from = { NOT = { has_valid_civic = civic_machine_terminator } }
			AND = {
				from = { has_valid_civic = civic_machine_terminator }
				is_robot_empire = yes
			}
		}
	}
}

# check whether the species is undergoing cybernetic deassimilation
# this = species (current)
# prev = country (assimilator)
coz_is_undergoing_assimilation_uncyborg_species = {
	optimize_memory
	has_living_standard = {
		type = living_standard_deassimilation_cyborg
		country = prev
	}
}

# this = country
is_organic_zealots = {
	optimize_memory
	has_civic = civic_organic_zealots
}

# this = country
is_valid_organic_zealots = {
	optimize_memory
	has_valid_civic = civic_organic_zealots
}